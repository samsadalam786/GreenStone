jQuery(document).ready(($)=>{initBot();const FILING_STATUSES={SINGLE:'SINGLE',MFJ:'MFJ',MFS:'MFS',HOH:'HOH',};const CELLS={EXEMPTION:'B55',STANDARD_DEDUCTION:'B55',FILING_STATUS:'B56',DEPENDENTS:'B57',IS_YOUR_COMPANY_AN_S_CORP:'B58',WAGES_FROM_OTHER_JOBS:'B61',BUSINESS_INCOME:'B62',ADJUSTED_GROSS_INCOME:'B63',ITEMIZED_DEDUCTIONS:'B64',PERSONAL_EXEMPTION:'B65',TAXABLE_INCOME:'B66',TAX_ON_TAXABLE_INC:'B67',SELF_EMPLOYMENT_TAX:'B68',PAYMENTS:'B69',LIABILITY_OR_REFUND:'B70',AVERAGE_TAX_RATE:'B71',SAVINGS_AS_AN_S_CORP:'B72',};const DATA={EXEMPTION:4000,FILING_STATUSES:FILING_STATUSES,STANDARD_DEDUCTION:function(status){if(status===FILING_STATUSES.MFJ){return 12600}else if(status===FILING_STATUSES.MFS){return 6300}else if(status===FILING_STATUSES.SINGLE){return 6300}else if(status===FILING_STATUSES.HOH){return 9300}
return 0},};DATA.ESTIMATIONS={B11:18550,B12:18550,B13:75300,B14:151900,B15:231450,B16:413350,B17:466950,B21:9275,B22:9275,B23:37650,B24:91150,B25:190150,B26:413350,B27:415050,B31:9275,B32:9275,B33:37650,B34:75950,B35:115725,B36:206675,B37:233475,B41:13250,B42:13250,B43:50400,B44:130150,B45:210800,B46:413350,B47:441000,D12:75300,D13:151900,D14:231450,D15:413350,D16:466950,D22:37650,D23:91150,D24:190150,D25:413350,D26:415050,D32:37650,D33:75950,D34:115725,D35:206675,D36:233475,D42:50400,D43:130150,D44:210800,D45:413350,D46:441000,E11:10,E12:1855,E13:10367.50,E14:29517.50,E15:51791.50,E16:111818.50,E17:130578.50,E21:10,E22:927.50,E23:5183.75,E24:18558.75,E25:46278.75,E26:119934.75,E27:120529.75,E31:10,E32:927.50,E33:5183.75,E34:14758.75,E35:25895.75,E36:55909.25,E37:65289.25,E41:10,E42:1325,E43:6897.50,E44:26835,E45:49417,E46:116258.50,E47:125936,G12:15,G13:25,G14:28,G15:33,G16:35,G17:39.6,G22:15,G23:25,G24:28,G25:33,G26:35,G27:39.6,G32:15,G33:25,G34:28,G35:33,G36:35,G37:39.6,G42:15,G43:25,G44:28,G45:33,G46:35,G47:39.6,I12:18550,I13:75300,I14:151900,I15:231450,I16:413350,I17:466950,I22:9275,I23:37650,I24:91150,I25:190150,I26:413350,I27:415050,I32:9275,I33:37650,I34:75950,I35:115725,I36:206675,I37:233475,I42:13250,I43:50400,I44:130150,I45:210800,I46:413350,I47:441000,};function initBot(){if(!$('.section-qtc').length)return;var vm={};vm.step=0;vm.steps=0;vm.$button='button[data-click]';vm.$input='input[data-model]';vm.$currencyInputs=$('input[data-currency]');vm.$resultOutput='[data-output="result"]';vm.$dateOutput='[data-output="date"]';vm.$messages=$('.section-qtc__messages');vm.$messagesCtn=vm.$messages.find('.section-qtc__message');vm.options={height:410,bottom:35,animation:{duration:200,easing:'linear',delay:100,},};vm.formula={filingStatus:'',dependents:0,wages:0,businessIncome:0,isCorp:0,hasWages:0,};$(vm.$button).on('click',(e)=>{const $button=$(e.target);if($button.data('click')==='next'){const option=$button.data('click-prop');const value=$button.data('click-value');vm.next(option,value)}
if($button.data('click')==='previous'){vm.previous()}})
$(vm.$input).on('change',(e)=>{const $input=$(e.target);const value=$input.val();const model=$input.data('model');vm.formula[model]=value!==''?UtilsManager.parseInput(value):0})
var year=moment().add(1,'year').year();vm.date=moment();vm.dueDates=[moment().set('month',4-1).set('date',18),moment().set('month',6-1).set('date',15),moment().set('month',9-1).set('date',15),moment().set('month',1-1).set('date',17).set('year',year),];vm.nextDueDate=vm.dueDates.find((dueDate)=>dueDate.isAfter(vm.date)).format('MM/DD/YYYY');vm.previous=function(){if(vm.step>0){vm.showPrevious()}};vm.next=function(option,value){if(option&&value!==undefined){vm.formula[option]=option==='filingStatus'?value:Number(value)}
if(vm.step<vm.steps){vm.showNext(option,value)}};vm._isValid=function(option,value){if(option==='dependents'&&isNaN(vm.formula.dependents)){return!1}else if(option==='wages'&&isNaN(vm.formula.wages)){return!1}else if(option==='result'&&isNaN(vm.formula.businessIncome)){return!1}
if(option==='hasWages'){if(value===1){$('.wages1').show().removeClass('hide');$('.wages0').show().removeClass('hide');vm.formula.wages=0;vm.formula.businessIncome=0;$('input[data-model="wages"]').val('$0.00').change();$('input[data-model="businessIncome"]').val('$0.00').change()}else{$('.wages1').hide().addClass('hide');$('.wages0').show().removeClass('hide');vm.formula.wages=0;vm.formula.businessIncome=0;$('input[data-model="wages"]').val('$0.00').change();$('input[data-model="businessIncome"]').val('$0.00').change()}}
return!0};vm.getHeight=function(){var $el=vm.$messagesCtn.filter(':not(.hide)').eq(vm.step);var outerHeight=$el.outerHeight();var height=outerHeight+vm.options.bottom;return height}
vm.setActive=function(){var $el=vm.$messagesCtn.filter(':not(.hide)').eq(vm.step);$('.section-qtc__message.is-active').removeClass('is-active');$el.addClass('is-active');if(vm.step===0){$('.section-qtc__thread-back').removeClass('is-visible')}else{$('.section-qtc__thread-back').addClass('is-visible')}}
vm.move=function(){vm.$messages.velocity({top:vm.options.height},vm.options.animation)}
vm.showNext=function(option,value){var isValid=vm._isValid(option,value);if(!isValid){return}
vm.step=vm.step+1;if(option==='result'){vm.result=botService().result(vm.formula);$(vm.$dateOutput).text(vm.nextDueDate);$(vm.$resultOutput).text(UtilsManager.formatMoney(vm.result))}
vm.options.height-=vm.getHeight();vm.move();vm.setActive()};vm.showPrevious=function(){vm.options.height+=vm.getHeight();vm.step--;vm.move();vm.setActive()};vm.initMaskMoney=function(){vm.$currencyInputs.maskMoney({thousands:',',decimal:'.',allowZero:!0,prefix:'$',affixesStay:!0,bringCaretAtEndOnFocus:!1})}
vm.init=function(){vm.step=-1;vm.steps=vm.$messagesCtn.length-1;vm.showNext();vm.initMaskMoney()};vm.init()}
function botService(){const vm={};vm.data={};vm.formulas={};vm.init=function(data){vm.data=data||{};vm.initFormulas()};vm.initFormulas=function(){vm.formulas[DATA.FILING_STATUSES.SINGLE]=function(){var B66=vm.getTaxableIncome();if(B66<=0){return 0}else if(B66<DATA.ESTIMATIONS.B21){return B66*(DATA.ESTIMATIONS.E21/100)}else if(B66>DATA.ESTIMATIONS.B22&&B66<DATA.ESTIMATIONS.D22){return DATA.ESTIMATIONS.E22+(B66-DATA.ESTIMATIONS.I22)*(DATA.ESTIMATIONS.G22/100)}else if(B66>DATA.ESTIMATIONS.D22&&B66<DATA.ESTIMATIONS.D23){return DATA.ESTIMATIONS.E23+(B66-DATA.ESTIMATIONS.I23)*(DATA.ESTIMATIONS.G23/100)}else if(B66>DATA.ESTIMATIONS.D23&&B66<DATA.ESTIMATIONS.D24){return DATA.ESTIMATIONS.E24+(B66-DATA.ESTIMATIONS.I24)*(DATA.ESTIMATIONS.G24/100)}else if(B66>DATA.ESTIMATIONS.D24&&B66<DATA.ESTIMATIONS.D25){return DATA.ESTIMATIONS.E25+(B66-DATA.ESTIMATIONS.I25)*(DATA.ESTIMATIONS.G25/100)}else if(B66>DATA.ESTIMATIONS.D25&&B66<DATA.ESTIMATIONS.D26){return DATA.ESTIMATIONS.E26+(B66-DATA.ESTIMATIONS.I26)*(DATA.ESTIMATIONS.G26/100)}else if(B66>DATA.ESTIMATIONS.D26){return DATA.ESTIMATIONS.E27+(B66-DATA.ESTIMATIONS.I27)*(DATA.ESTIMATIONS.G26/100)}
return 0};vm.formulas[DATA.FILING_STATUSES.MFJ]=function(){var B66=vm.getTaxableIncome();if(B66<=0){return 0}else if(B66<DATA.ESTIMATIONS.B11){return B66*(DATA.ESTIMATIONS.E11/100)}else if(B66>DATA.ESTIMATIONS.B12&&B66<DATA.ESTIMATIONS.D12){return DATA.ESTIMATIONS.E12+(B66-DATA.ESTIMATIONS.I12)*(DATA.ESTIMATIONS.G12/100)}else if(B66>DATA.ESTIMATIONS.B13&&B66<DATA.ESTIMATIONS.D13){return DATA.ESTIMATIONS.E13+(B66-DATA.ESTIMATIONS.I13)*(DATA.ESTIMATIONS.G13/100)}else if(B66>DATA.ESTIMATIONS.B14&&B66<DATA.ESTIMATIONS.D14){return DATA.ESTIMATIONS.E14+(B66-DATA.ESTIMATIONS.I14)*(DATA.ESTIMATIONS.G14/100)}else if(B66>DATA.ESTIMATIONS.B15&&B66<DATA.ESTIMATIONS.D15){return DATA.ESTIMATIONS.E15+(B66-DATA.ESTIMATIONS.I15)*(DATA.ESTIMATIONS.G15/100)}else if(B66>B16&&B66<D16){return DATA.ESTIMATIONS.E16+(B66-DATA.ESTIMATIONS.I16)*(DATA.ESTIMATIONS.G16/100)}else if(B66>DATA.ESTIMATIONS.D16){return DATA.ESTIMATIONS.E17+(B66-DATA.ESTIMATIONS.I17)*(DATA.ESTIMATIONS.G17/100)}
return 0};vm.formulas[DATA.FILING_STATUSES.MFS]=function(){var B66=vm.getTaxableIncome();if(B66<=0){return 0}else if(B66<DATA.ESTIMATIONS.B31){return B66*(DATA.ESTIMATIONS.E31/100)}else if(B66>DATA.ESTIMATIONS.B32&&B66<DATA.ESTIMATIONS.D32){return DATA.ESTIMATIONS.E32+(B66-DATA.ESTIMATIONS.I32)*(DATA.ESTIMATIONS.G32/100)}else if(B66>DATA.ESTIMATIONS.B33&&B66<DATA.ESTIMATIONS.D33){return DATA.ESTIMATIONS.E33+(B66-DATA.ESTIMATIONS.I33)*(DATA.ESTIMATIONS.G33/100)}else if(B66>DATA.ESTIMATIONS.B34&&B66<DATA.ESTIMATIONS.D34){return DATA.ESTIMATIONS.E34+(B66-DATA.ESTIMATIONS.I34)*(DATA.ESTIMATIONS.G34/100)}else if(B66>DATA.ESTIMATIONS.B35&&B66<DATA.ESTIMATIONS.D35){return DATA.ESTIMATIONS.E35+(B66-DATA.ESTIMATIONS.I35)*(DATA.ESTIMATIONS.G35/100)}else if(B66>DATA.ESTIMATIONS.B36&&B66<DATA.ESTIMATIONS.D36){return DATA.ESTIMATIONS.E36+(B66-DATA.ESTIMATIONS.I36)*(DATA.ESTIMATIONS.G36/100)}else if(B66>DATA.ESTIMATIONS.D36){return DATA.ESTIMATIONS.E37+(B66-DATA.ESTIMATIONS.I37)*(DATA.ESTIMATIONS.G37/100)}
return 0};vm.formulas[DATA.FILING_STATUSES.HOH]=function(){var B66=vm.getTaxableIncome();if(B66<=0){return 0}else if(B66<DATA.ESTIMATIONS.B41){return B66*(DATA.ESTIMATIONS.E41/100)}else if(B66>DATA.ESTIMATIONS.B42&&B66<DATA.ESTIMATIONS.D42){return DATA.ESTIMATIONS.E42+(B66-DATA.ESTIMATIONS.I42)*(DATA.ESTIMATIONS.G42/100)}else if(B66>DATA.ESTIMATIONS.B43&&B66<DATA.ESTIMATIONS.D43){return DATA.ESTIMATIONS.E43+(B66-DATA.ESTIMATIONS.I43)*(DATA.ESTIMATIONS.G43/100)}else if(B66>DATA.ESTIMATIONS.B44&&B66<DATA.ESTIMATIONS.D44){return DATA.ESTIMATIONS.E44+(B66-DATA.ESTIMATIONS.I44)*(DATA.ESTIMATIONS.G44/100)}else if(B66>DATA.ESTIMATIONS.B45&&B66<DATA.ESTIMATIONS.D45){return DATA.ESTIMATIONS.E45+(B66-DATA.ESTIMATIONS.I45)*(DATA.ESTIMATIONS.G45/100)}else if(B66>DATA.ESTIMATIONS.B46&&B66<DATA.ESTIMATIONS.D46){return DATA.ESTIMATIONS.E46+(B66-DATA.ESTIMATIONS.I46)*(DATA.ESTIMATIONS.G46/100)}else if(B66>DATA.ESTIMATIONS.D46){return DATA.ESTIMATIONS.E47+(B66-DATA.ESTIMATIONS.I47)*(DATA.ESTIMATIONS.G47/100)}
return 0}};vm.getSelfEmploymentTax=function(){var result=0;if(vm.data.isCorp===0){result=vm.data.businessIncome*0.9235*0.153}
return result};vm.getTaxOnTaxableInc=function(){var fun=vm.formulas[vm.data.filingStatus];var res=fun();return res};vm.getAdjustedGrossIncome=function(){return vm.data.wages+vm.data.businessIncome};vm.getItemizedDeductions=function(){return-vm.getStandardDeduction()};vm.getStandardDeduction=function(){return DATA.STANDARD_DEDUCTION(vm.data.filingStatus)};vm.getDependents=function(){return vm.data.dependents}
vm.getPersonalExemption=function(){var ex=DATA.EXEMPTION;if(vm.data.filingStatus===DATA.FILING_STATUSES.SINGLE){return-ex+(-ex*vm.getDependents())}else if(vm.data.filingStatus===DATA.FILING_STATUSES.MFJ){return-ex*2+(-ex*vm.getDependents())}else if(vm.data.filingStatus===DATA.FILING_STATUSES.MFS){return-ex+(-ex*vm.getDependents())}else if(vm.data.filingStatus===DATA.FILING_STATUSES.HOH){return-ex+(-ex*vm.getDependents())}
return 0}
vm.getTaxableIncome=function(){var personalExemption=vm.getPersonalExemption();var taxableIncome=vm.getAdjustedGrossIncome()+vm.getItemizedDeductions()+personalExemption;return taxableIncome};vm.isValid=function(data){if(!data.filingStatus){return!1}
return!0};vm.result=function(data){if(!vm.isValid(data)){return 0}
vm.init(data);var yearlyTaxes=Math.ceil(vm.getTaxOnTaxableInc()+vm.getSelfEmploymentTax());var yearlyTaxesToPay=yearlyTaxes*0.9;var toPay=yearlyTaxesToPay/4
return Math.ceil(toPay)};return vm}
UtilsManager={}
UtilsManager.formatNumber=function(number,format='0.00'){return numeral(number).format(format)}
UtilsManager.formatMoney=function(amount,currency='$'){return `${currency}${numeral(amount).format('0,0.00')}`}
UtilsManager.parseNumber=function(text,replaceString='',limit){const value=parseFloat((text||'0').replace(replaceString,''))||0
return limit&&value>limit?limit:value}
UtilsManager.removeCurrencyPrefix=function(text,prefix){return text.replace(prefix,'')}
UtilsManager.parseInput=function(inputValue){inputValue=UtilsManager.removeCurrencyPrefix(inputValue,'$');inputValue=UtilsManager.formatNumber(inputValue);inputValue=UtilsManager.parseNumber(inputValue);return inputValue}})